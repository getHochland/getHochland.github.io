(window.webpackJsonp=window.webpackJsonp||[]).push([[8,2,3,4],{295:function(t,e,n){"use strict";n.r(e);var r={name:"Header",props:["h1"]},o=n(15),component=Object(o.a)(r,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"container-fluid home-slider"},[n("div",{staticClass:"carousel slide",attrs:{id:"carouselExampleCaptions","data-ride":"carousel"}},[n("div",{staticClass:"carousel-inner"},[n("div",{staticClass:"carousel-item active",staticStyle:{"background-color":"#e6e6fa!important"}},[n("div",{staticClass:"carousel-caption d-none d-md-block"},[n("h1",{staticStyle:{color:"#343a40"}},[t._v(" \n            "+t._s(t.h1)+"\n          ")])])])])])])}),[],!1,null,"4d677425",null);e.default=component.exports},301:function(t,e,n){"use strict";n.r(e);var r={name:"aside.vue",props:["tags","aside"]},o=n(15),component=Object(o.a)(r,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"col-md-4"},[n("div",{staticClass:"card my-4"},[n("h5",{staticClass:"card-header"},[t._v("Теги")]),t._v(" "),n("div",{staticClass:"card-body"},[n("div",{staticClass:"d-flex flex-wrap"},t._l(t.tags,(function(e){return n("nuxt-link",{key:e.name,staticClass:"m-2 h5",attrs:{to:"/tags/"+e.name}},[t._v("#"+t._s(e.name)+"\n        ")])})),1)])]),t._v(" "),n("div",{staticClass:"card my-4"},[n("h5",{staticClass:"card-header"},[t._v("Последние статьи")]),t._v(" "),t._l(t.aside,(function(e){return n("div",{key:e.id,staticClass:"card-body"},[n("h5",{staticClass:"card-title"},[t._v(t._s(e.h1))]),t._v(" "),n("img",{staticClass:"card-img-top",attrs:{src:e.image,alt:""}}),t._v(" "),n("div",{staticClass:"truncate",domProps:{innerHTML:t._s(e.description)}}),t._v(" "),n("nuxt-link",{staticClass:"card-link",attrs:{to:"/posts/"+e.slug}},[t._v("Ссылка на статью")]),t._v(" "),n("hr")],1)}))],2)])}),[],!1,null,"7e38b0bf",null);e.default=component.exports},302:function(t,e,n){"use strict";n.r(e);var r=n(10),o=(n(53),n(208),n(41),{props:["post"],data:function(){return{new_comment:""}},methods:{addComment:function(){var t=this;return Object(r.a)(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.$axios.post("https://spa--blog.herokuapp.com/api/comments/",{post:t.$props.post.slug,username:t.user.username,text:t.new_comment});case 3:n=e.sent,t.new_comment="",t.comments.splice(0,0,n.data),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:t.$store.dispatch("store/getComments",t.$route.params.slug);case 12:case"end":return e.stop()}}),e,null,[[0,8]])})))()}},computed:{getComments:function(){return this.$store.state.store.comments},loggedIn:function(){return this.$auth.loggedIn},user:function(){return this.$auth.user},isComplete:function(){return this.new_comment}}}),c=n(15),component=Object(c.a)(o,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",{staticClass:"card my-4"},[n("h5",{staticClass:"card-header"},[t._v("Прокомментируй:")]),t._v(" "),t.loggedIn?n("div",{staticClass:"card-body"},[n("form",{on:{submit:function(e){return e.preventDefault(),t.addComment.apply(null,arguments)}}},[n("div",{staticClass:"form-group"},[n("textarea",{directives:[{name:"model",rawName:"v-model",value:t.new_comment,expression:"new_comment"}],staticClass:"form-control",attrs:{rows:"3"},domProps:{value:t.new_comment},on:{input:function(e){e.target.composing||(t.new_comment=e.target.value)}}})]),t._v(" "),n("button",{staticClass:"btn btn-primary",attrs:{type:"submit",disabled:!t.isComplete}},[t._v("Отправить")])])]):n("div",[n("h6",{staticClass:"card-header"},[n("nuxt-link",{attrs:{to:"/signin"}},[t._v("Авторизуйтесь")]),t._v(" или "),n("nuxt-link",{attrs:{to:"/signup"}},[t._v("зарегистрируйтесь")]),t._v(" чтобы оставить комментарий")],1)])]),t._v(" "),t._l(t.getComments,(function(e){return n("div",{key:e.id,staticClass:"media mb-4"},[n("img",{staticClass:"d-flex mr-3 rounded-circle",attrs:{src:"http://placehold.it/50x50",alt:""}}),t._v(" "),n("div",{staticClass:"media-body"},[n("h5",{staticClass:"mt-0"},[t._v(t._s(e.username))]),t._v("\n      "+t._s(e.text)+"\n    ")])])}))],2)}),[],!1,null,"40539565",null);e.default=component.exports},336:function(t,e,n){"use strict";n.r(e);var r=n(10),o=(n(88),n(53),n(41)),c=n.n(o),l=(n(197),n(295)),d=n(301),m=n(302),v={components:{Aside:d.default,Header:l.default,Comments:m.default},layout:"post_detail",asyncData:function(t){return Object(r.a)(regeneratorRuntime.mark((function e(){var n,r,o,aside;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.params,e.next=3,c.a.get("https://spa--blog.herokuapp.com/api/posts/".concat(n.slug));case 3:return r=e.sent,e.next=6,c.a.get("https://spa--blog.herokuapp.com/api/tags/");case 6:return o=e.sent,e.next=9,c.a.get("https://spa--blog.herokuapp.com/api/aside/");case 9:return aside=e.sent,e.abrupt("return",{post:r.data,tags:o.data,aside:aside.data});case 11:case"end":return e.stop()}}),e)})))()},created:function(){this.$store.dispatch("store/getComments",this.$route.params.slug)},methods:{getComments:function(){var t=this;c.a.get("https://spa--blog.herokuapp.com/api/comments/".concat(this.$route.params.slug)).then((function(e){t.$store.commit("store/SET_COMMENTS",e.data)})).catch((function(t){console.log(t)}))},stopTimer:function(){this.interval&&window.clearInterval(this.interval)},startTimer:function(){var t=this;this.stopTimer(),this.interval=window.setInterval((function(){t.getComments()}),6e3)}},mounted:function(){this.startTimer()},beforeDestroy:function(){this.stopTimer()}},_=n(15),component=Object(_.a)(v,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("Header",{attrs:{h1:t.post.h1}}),t._v(" "),n("div",{staticClass:"container"},[n("div",{staticClass:"row"},[n("div",{staticClass:"col-lg-8"},[n("nav",{staticClass:"mt-4",attrs:{"aria-label":"breadcrumb"}},[n("ol",{staticClass:"breadcrumb"},[n("li",{staticClass:"breadcrumb-item"},[n("nuxt-link",{attrs:{to:"/"}},[t._v("Главная")])],1),t._v(" "),n("li",{staticClass:"breadcrumb-item active",attrs:{"aria-current":"page"}},[t._v(t._s(t.post.h1))])])]),t._v(" "),n("img",{staticClass:"img-fluid rounded ",attrs:{src:t.post.image,alt:""}}),t._v(" "),n("hr"),t._v(" "),n("p",{domProps:{innerHTML:t._s(t.post.content)}}),t._v(" "),n("div",{staticClass:"d-flex justify-content-end"},t._l(t.post.tags,(function(e){return n("span",[n("nuxt-link",{staticClass:"mr-1 badge badge-info",attrs:{to:"/tags/"+e}},[t._v("#"+t._s(e))])],1)})),0),t._v(" "),n("hr"),t._v(" "),n("div",{staticClass:"d-flex"},[n("div",{staticClass:"mr-auto p-2 lead"},[t._v("Автор: "+t._s(t.post.author))]),t._v(" "),n("div",{staticClass:"p-2"},[t._v("Опубликовано: "+t._s(t.post.created_at))])]),t._v(" "),n("hr"),t._v(" "),n("Comments",{attrs:{post:t.post}})],1),t._v(" "),n("Aside",{attrs:{tags:t.tags,aside:t.aside}})],1)])],1)}),[],!1,null,"2c457332",null);e.default=component.exports;installComponents(component,{Header:n(295).default,Comments:n(302).default,Aside:n(301).default})}}]);