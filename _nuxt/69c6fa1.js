(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{302:function(t,e,n){"use strict";n.r(e);var r=n(10),o=(n(53),n(208),n(41),{props:["post"],data:function(){return{new_comment:""}},methods:{addComment:function(){var t=this;return Object(r.a)(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.$axios.post("https://spa--blog.herokuapp.com/api/comments/",{post:t.$props.post.slug,username:t.user.username,text:t.new_comment});case 3:n=e.sent,t.new_comment="",t.comments.splice(0,0,n.data),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:t.$store.dispatch("store/getComments",t.$route.params.slug);case 12:case"end":return e.stop()}}),e,null,[[0,8]])})))()}},computed:{getComments:function(){return this.$store.state.store.comments},loggedIn:function(){return this.$auth.loggedIn},user:function(){return this.$auth.user},isComplete:function(){return this.new_comment}}}),c=n(15),component=Object(c.a)(o,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",{staticClass:"card my-4"},[n("h5",{staticClass:"card-header"},[t._v("Прокомментируй:")]),t._v(" "),t.loggedIn?n("div",{staticClass:"card-body"},[n("form",{on:{submit:function(e){return e.preventDefault(),t.addComment.apply(null,arguments)}}},[n("div",{staticClass:"form-group"},[n("textarea",{directives:[{name:"model",rawName:"v-model",value:t.new_comment,expression:"new_comment"}],staticClass:"form-control",attrs:{rows:"3"},domProps:{value:t.new_comment},on:{input:function(e){e.target.composing||(t.new_comment=e.target.value)}}})]),t._v(" "),n("button",{staticClass:"btn btn-primary",attrs:{type:"submit",disabled:!t.isComplete}},[t._v("Отправить")])])]):n("div",[n("h6",{staticClass:"card-header"},[n("nuxt-link",{attrs:{to:"/signin"}},[t._v("Авторизуйтесь")]),t._v(" или "),n("nuxt-link",{attrs:{to:"/signup"}},[t._v("зарегистрируйтесь")]),t._v(" чтобы оставить комментарий")],1)])]),t._v(" "),t._l(t.getComments,(function(e){return n("div",{key:e.id,staticClass:"media mb-4"},[n("img",{staticClass:"d-flex mr-3 rounded-circle",attrs:{src:"http://placehold.it/50x50",alt:""}}),t._v(" "),n("div",{staticClass:"media-body"},[n("h5",{staticClass:"mt-0"},[t._v(t._s(e.username))]),t._v("\n      "+t._s(e.text)+"\n    ")])])}))],2)}),[],!1,null,"40539565",null);e.default=component.exports}}]);